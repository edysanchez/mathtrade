{% extends "layouts/logged.twig" %}

{% block scripts %}
<script type="text/javascript" data-main='assets/js/home.js' src="components/requirejs/require.js"></script>
{% endblock %}

{% block content %}
    <h2>Mis juegos</h2>
    <div id="main"></div>
    

{% verbatim %}
<script id="games-template" type="text/x-handelbars-template">

    {{#each this}}
    <div class="row" style="margin-top:10px;">
        {{#if is_pack}}
            <h4>{{name}}</h4>
            {{#each packItems}}
            <img class="" src="{{bgg_img}}" />
            {{/each}}
        {{else}}
        
        <div class="col-md-2">
            <img class="img-responsive" src="{{bgg_img}}" />
        </div>
        <div class="col-md-10" style="position:relative; min-height:175px;">
            <h4 data-id="{{item_id}}">{{name}}</h4>
            <p>{{description}}</p>
            <button data-toggle-mt="{{id}}" class="btn">{{#if inMT}}Quitar de la MT{{else}}Añadir a la MT{{/if}}</button>
        </div>
        {{/if}}
    </div>
    {{/each}}

</script>

<script id="addgame-template" type="text/x-handelbars-template">
    <div class="col-md-6">
    <form>
      <div class="form-group">
        <label for="bgg_id">BGG ID:</label>
        <input type="text" class="form-control" name="bgg_id" id="bgg_id" placeholder="Introduce el id de BGG o empieza a teclear el nombre" value="{{bgg_id}}">
      </div>
      <div class="form-group">
        <label for="name">Nombre:</label>
        <input type="text" class="form-control" name="name" id="name" placeholder="Indica el nombre del juego" value="{{name}}">
      </div>

      <div class="form-group">
        <label for="description">Descripción:</label>
        <textarea class="form-control" name="description" id="description" placeholder="Describe el estado del juego idioma e información útil">
            {{description}}
        </textarea>
      </div>
      
      <button type="submit" class="btn btn-default">Guardar</button>
    </form>
    </div>
    <div class="col-md-6">
        <label>Imagen principal:</label>
        <div id="img">
            <img {{#unless img}}style="max-width:200px;"{{/unless}} src="{{#if img}}{{full_img}}{{else}}img/placeholder.png{{/if}}" />
        </div>
        <div id="additional-images"></div>
    </div>
</script>

{% endverbatim %}



<script type="text/javascript">
    var games = JSON.parse('{{ games|raw }}');  
</script>
{% endblock %}
